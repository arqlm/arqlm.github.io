{
  "cells": [
    {
      "cell_type": "markdown",
      "id": "eaea9f34",
      "metadata": {
        "id": "eaea9f34"
      },
      "source": [
        "# Instalando la GSLIB"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "31e6698f",
      "metadata": {
        "id": "31e6698f"
      },
      "source": [
        "GSLIB (Geostatistical Software Library) es una de las primeras colecciones de software geoestadístico del mundo. Fue desarrollada por estudiantes y profesores de la Universidad de Stanford, con Clayton Deutsch y André Journel como autores principales.\n",
        "\n",
        "**Características clave**\n",
        "* Finalidad: GSLIB se utiliza para una variedad de tareas geoestadísticas, como el análisis de datos, la estimación de variogramas, el kriging y las simulaciones estocásticas en 1D, 2D y 3D.\n",
        "* Código original: El código original de la biblioteca está escrito en Fortran, pero sus algoritmos han sido ampliamente utilizados y reimplementados en otros lenguajes.\n",
        "* Dominio público: GSLIB es de dominio público y se distribuye con el código fuente y ejecutables para PC.\n",
        "* Reimplementación en Python: Los algoritmos de GSLIB se han reimplementado en Python en bibliotecas como GeostatPy, lo que facilita su uso en entornos de programación modernos.\n",
        "* Aplicaciones: Es una herramienta fundamental para geólogos, ingenieros de minas y científicos de datos en el análisis de datos espaciales y la estimación de recursos."
      ]
    },
    {
      "cell_type": "markdown",
      "id": "692e3eea",
      "metadata": {
        "id": "692e3eea"
      },
      "source": [
        "## Instalacion en Colab"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "95385cce",
      "metadata": {
        "id": "95385cce"
      },
      "source": [
        "### Descargar Programas"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "4d697335",
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "4d697335",
        "outputId": "007901d9-54b8-4423-835b-f790dcc7c9a4"
      },
      "outputs": [
        {
          "name": "stderr",
          "output_type": "stream",
          "text": [
            "--2025-10-23 14:00:30--  http://www.statios.com/software/gslib90_ls.tar.gz\n",
            "Resolving www.statios.com (www.statios.com)... 184.106.55.106\n",
            "Connecting to www.statios.com (www.statios.com)|184.106.55.106|:80... connected.\n",
            "HTTP request sent, awaiting response... 200 OK\n",
            "Length: 291768 (285K) [application/x-gzip]\n",
            "Saving to: ‘gslib90_ls.tar.gz’\n",
            "\n",
            "     0K .......... .......... .......... .......... .......... 17%  547K 0s\n",
            "    50K .......... .......... .......... .......... .......... 35% 1.03M 0s\n",
            "   100K .......... .......... .......... .......... .......... 52% 10.3M 0s\n",
            "   150K .......... .......... .......... .......... .......... 70% 1.13M 0s\n",
            "   200K .......... .......... .......... .......... .......... 87% 11.7M 0s\n",
            "   250K .......... .......... .......... ....                 100%  340M=0.2s\n",
            "\n",
            "2025-10-23 14:00:30 (1.46 MB/s) - ‘gslib90_ls.tar.gz’ saved [291768/291768]\n",
            "\n"
          ]
        }
      ],
      "source": [
        "%%bash\n",
        "\n",
        "url=\"http://www.statios.com/software/gslib90_ls.tar.gz\"\n",
        "wget -O gslib90_ls.tar.gz $url\n",
        "tar -xf gslib90_ls.tar.gz\n",
        "rm gslib90_ls.tar.gz\n",
        "\n",
        "mkdir Gslib90\n",
        "\n",
        "gfortran -w -O3 -fallow-argument-mismatch -o ./Gslib90/gamv ./gslib90/gamv.for ./gslib90/gslib/*.for\n",
        "gfortran -w -O3 -fallow-argument-mismatch -o ./Gslib90/vmodel ./gslib90/vmodel.for ./gslib90/gslib/*.for\n",
        "gfortran -w -O3 -fallow-argument-mismatch -o ./Gslib90/ik3d ./gslib90/ik3d.for ./gslib90/gslib/*.for\n",
        "gfortran -w -O3 -fallow-argument-mismatch -o ./Gslib90/kt3d ./gslib90/kt3d.for ./gslib90/gslib/*.for\n",
        "\n",
        "rm -r gslib90"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "105f560a",
      "metadata": {
        "id": "105f560a"
      },
      "source": [
        "### Probar correcta instalación"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "413497f1",
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "413497f1",
        "outputId": "dc1937a6-2607-4032-9830-4e999fcb97b4"
      },
      "outputs": [
        {
          "name": "stdout",
          "output_type": "stream",
          "text": [
            "\n",
            " GAMV Version: 3.000\n",
            "\n",
            " ERROR - the parameter file does not exist,\n",
            "         check for the file and try again  \n",
            "\n",
            "\n"
          ]
        }
      ],
      "source": [
        "import subprocess\n",
        "\n",
        "# Using subprocess.run() to capture output\n",
        "result = subprocess.run([\"./Gslib90/gamv.exe\", \"holar.par\"], capture_output=True, text=True, check=True)\n",
        "print(result.stdout)"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "a86f094d",
      "metadata": {
        "id": "a86f094d"
      },
      "source": [
        "## Instalacion en Jupyter (Windows)"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "742c9f0c",
      "metadata": {
        "id": "742c9f0c"
      },
      "source": [
        "### Descargar Programas"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "7da81238",
      "metadata": {
        "id": "7da81238"
      },
      "source": [
        "Puedes descargar directamente de la pagina\n",
        "\n",
        "http://www.statios.com/software/gslib90.zip\n",
        "\n",
        "y descomprimir los programas.\n",
        "\n",
        "Asegúrate de que todos se puedan acceder dentro de la misma carpeta Gslib90.\n",
        "\n",
        "También puedes usar el siguiente código en Jupyter."
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "b69b0bd0",
      "metadata": {
        "id": "b69b0bd0",
        "vscode": {
          "languageId": "shellscript"
        }
      },
      "outputs": [],
      "source": [
        "import urllib.request\n",
        "import zipfile\n",
        "import os\n",
        "\n",
        "url = \"http://www.statios.com/software/gslib90.zip\"\n",
        "zip_path = \"gslib90.zip\"\n",
        "\n",
        "# Descargar el archivo zip\n",
        "urllib.request.urlretrieve(url, zip_path)\n",
        "\n",
        "# Descomprimir el zip en el directorio actual\n",
        "with zipfile.ZipFile(zip_path, \"r\") as z:\n",
        "    z.extractall()\n",
        "\n",
        "# Eliminar el archivo zip descargado\n",
        "os.remove(zip_path)"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "f226714e",
      "metadata": {
        "id": "f226714e"
      },
      "source": [
        "### Probar correcta instalación"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "816a82b9",
      "metadata": {
        "id": "816a82b9",
        "outputId": "ffe0d388-643d-4cd7-a0da-83b7de076693"
      },
      "outputs": [
        {
          "name": "stdout",
          "output_type": "stream",
          "text": [
            "\n",
            "GAMV Version: 2.905\n",
            "\n",
            "ERROR - the parameter file does not exist,\n",
            "        check for the file and try again  \n",
            "\n",
            "Stop - Program terminated.\n",
            "\n",
            "\n"
          ]
        }
      ],
      "source": [
        "import subprocess\n",
        "\n",
        "# Using subprocess.run() to capture output\n",
        "result = subprocess.run([\"./Gslib90/gamv\", \"holar.par\"], capture_output=True, text=True, check=True)\n",
        "print(result.stdout)"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "de2fdd44",
      "metadata": {
        "id": "de2fdd44"
      },
      "source": [
        "## Instalacion en Jupyter (Mac)"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "037e0743",
      "metadata": {
        "id": "037e0743"
      },
      "source": [
        "### Instalar el compilador Fortran"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 25,
      "id": "f118ea82",
      "metadata": {
        "id": "f118ea82",
        "outputId": "cc0d188f-5d38-4091-fc66-efec3d2445fe"
      },
      "outputs": [
        {
          "name": "stderr",
          "output_type": "stream",
          "text": [
            "The system cannot find the path specified.\n"
          ]
        }
      ],
      "source": [
        "!conda install -c conda-forge gfortran -y"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "026e1f07",
      "metadata": {
        "id": "026e1f07"
      },
      "source": [
        "### Verificar la instalación"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "3a8d9212",
      "metadata": {
        "id": "3a8d9212",
        "outputId": "2a6981b1-f801-4dd7-e1ef-86d8a626ed50"
      },
      "outputs": [
        {
          "name": "stdout",
          "output_type": "stream",
          "text": [
            "GNU Fortran (conda-forge gcc 15.1.0-5) 15.1.0\n",
            "Copyright (C) 2025 Free Software Foundation, Inc.\n",
            "This is free software; see the source for copying conditions.  There is NO\n",
            "warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n",
            "\n"
          ]
        }
      ],
      "source": [
        "!gfortran --version"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "1cde065c",
      "metadata": {
        "id": "1cde065c"
      },
      "source": [
        "### Descargar Programas"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "3c9c60c8",
      "metadata": {
        "id": "3c9c60c8",
        "outputId": "a62ce80e-07ed-453d-d5b1-1e1de0cbde61"
      },
      "outputs": [
        {
          "name": "stderr",
          "output_type": "stream",
          "text": [
            "C:\\Users\\Alvaro\\AppData\\Local\\Temp\\ipykernel_11476\\1739640109.py:13: DeprecationWarning: Python 3.14 will, by default, filter extracted tar archives and reject files or modify their metadata. Use the filter argument to control this behavior.\n",
            "  tar.extractall(\"temp_gslib90\")\n"
          ]
        }
      ],
      "source": [
        "import urllib.request\n",
        "import zipfile\n",
        "import os\n",
        "\n",
        "url = \"http://www.statios.com/software/gslib90_ls.tar.gz\"\n",
        "tar_path = \"gslib90_ls.tar.gz\"\n",
        "\n",
        "# Descargar el archivo tar.gz\n",
        "urllib.request.urlretrieve(url, tar_path)\n",
        "# Descomprimir el tar.gz en el directorio actual\n",
        "import tarfile\n",
        "with tarfile.open(tar_path, \"r:gz\") as tar:\n",
        "    tar.extractall(\"temp_gslib90\")\n",
        "os.remove(tar_path)\n",
        "\n",
        "## Crear directorio Gslib90\n",
        "os.makedirs(\"Gslib90\", exist_ok=True)"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "93c99bbc",
      "metadata": {
        "id": "93c99bbc"
      },
      "source": [
        "### Compilar programas"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "8987ed17",
      "metadata": {
        "id": "8987ed17"
      },
      "outputs": [],
      "source": [
        "!gfortran -w -O3 -fallow-argument-mismatch -o ./Gslib90/gamv ./temp_gslib90/gslib90/gamv.for ./temp_gslib90/gslib90/gslib/*.for\n",
        "!gfortran -w -O3 -fallow-argument-mismatch -o ./Gslib90/vmodel ./temp_gslib90/gslib90/vmodel.for ./temp_gslib90/gslib90/gslib/*.for\n",
        "!gfortran -w -O3 -fallow-argument-mismatch -o ./Gslib90/ik3d ./temp_gslib90/gslib90/ik3d.for ./temp_gslib90/gslib90/gslib/*.for\n",
        "!gfortran -w -O3 -fallow-argument-mismatch -o ./Gslib90/kt3d ./temp_gslib90/gslib90/kt3d.for ./temp_gslib90/gslib90/gslib/*.for"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "89ff0df8",
      "metadata": {
        "id": "89ff0df8"
      },
      "source": [
        "### Remover Carpeta temporal a mano"
      ]
    },
    {
      "cell_type": "markdown",
      "id": "fEe9I2H0X-7z",
      "metadata": {
        "id": "fEe9I2H0X-7z"
      },
      "source": [
        "### Probar correcta instalación"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "b78f8f3b",
      "metadata": {
        "id": "b78f8f3b",
        "outputId": "31c3b54e-d633-429a-d02b-1cc57c7edd01"
      },
      "outputs": [
        {
          "name": "stdout",
          "output_type": "stream",
          "text": [
            "\n",
            " GAMV Version: 3.000\n",
            "\n",
            " ERROR - the parameter file does not exist,\n",
            "         check for the file and try again  \n",
            "\n",
            "\n"
          ]
        }
      ],
      "source": [
        "import subprocess\n",
        "\n",
        "# Using subprocess.run() to capture output\n",
        "result = subprocess.run([\"./Gslib90/gamv\", \"holar.par\"], capture_output=True, text=True, check=True)\n",
        "print(result.stdout)"
      ]
    }
  ],
  "metadata": {
    "colab": {
      "provenance": []
    },
    "kernelspec": {
      "display_name": "min431",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.13.5"
    },
    "toc": {
      "base_numbering": 1,
      "nav_menu": {},
      "number_sections": true,
      "sideBar": true,
      "skip_h1_title": false,
      "title_cell": "Table of Contents",
      "title_sidebar": "Contents",
      "toc_cell": false,
      "toc_position": {
        "height": "calc(100% - 180px)",
        "left": "10px",
        "top": "150px",
        "width": "409.6px"
      },
      "toc_section_display": true,
      "toc_window_display": true
    }
  },
  "nbformat": 4,
  "nbformat_minor": 5
}
